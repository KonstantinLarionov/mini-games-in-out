<div class="neon-bg"></div>

<div class="neon-wrapper">
  <h1 class="neon-logo">NEON GAMES</h1>

  <nav class="neon-tabs">
    <button [class.active]="tab==='main'" (click)="tab='main'">üí∞ –ë–∞–ª–∞–Ω—Å</button>
    <button [class.active]="tab==='payin'" (click)="tab='payin'">‚¨Ü –ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
    <button [class.active]="tab==='payout'" (click)="tab='payout'">‚¨á –í—ã–≤–µ—Å—Ç–∏</button>
    <button [class.active]="tab==='history'" (click)="tab='history'">üìú –ò—Å—Ç–æ—Ä–∏—è</button>
  </nav>

  <section class="tab-content">
    <!-- –ë–∞–ª–∞–Ω—Å -->
    <ng-container *ngIf="tab==='main' && profile">
      <div class="balance-display">
        <span class="label">–¢–≤–æ–π –±–∞–ª–∞–Ω—Å</span>
        <h2>{{ profile.balance | number:'1.2-2' }} USDT</h2>
        <p class="network">–°–µ—Ç—å: {{ network }}</p>
      </div>
    </ng-container>

    <!-- –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ -->
    <ng-container *ngIf="tab==='payin'">
      <h3>–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ TRC20 (USDT)</h3>
      <p class="info-text">–û—Ç–ø—Ä–∞–≤—å USDT –Ω–∞ –∞–¥—Ä–µ—Å –Ω–∏–∂–µ:</p>

      <div class="wallet-box">
        <p class="wallet-address">{{ trcWallet }}</p>
        <img [src]="qrUrl" alt="QR USDT TRC20">
      </div>

      <div *ngIf="!isConfirmMode; else confirmBlock">
        <p class="subtext">–ü–æ—Å–ª–µ –ø–µ—Ä–µ–≤–æ–¥–∞ –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ üëá</p>
        <button class="neon-btn" (click)="openConfirmMode()">–Ø –ø–æ–ø–æ–ª–Ω–∏–ª</button>
      </div>

      <ng-template #confirmBlock>
        <div class="confirm-block">
          <h4>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞</h4>
          <input type="number" [(ngModel)]="payAmount" placeholder="–°—É–º–º–∞ USDT" class="neon-input">
          <input type="text" [(ngModel)]="hashTx" placeholder="–•—ç—à —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (TXID)" class="neon-input">
          <button class="neon-btn" (click)="confirmPayIn()" style="border-bottom-right-radius: 0; border-top-right-radius: 0;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
          <button class="neon-btn danger" (click)="isConfirmMode=false" style="border-bottom-left-radius: 0; border-top-left-radius: 0;">–û—Ç–º–µ–Ω–∞</button>
        </div>
      </ng-template>
    </ng-container>

    <!-- –í—ã–≤–æ–¥ -->
    <ng-container *ngIf="tab==='payout'">
      <h3>–í—ã–≤–æ–¥ TRC20 (USDT)</h3>
      <input type="number" [(ngModel)]="payoutAmount" placeholder="–°—É–º–º–∞ USDT" class="neon-input">
      <input type="text" [(ngModel)]="payoutWallet" placeholder="–ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ TRC20" class="neon-input">
      <button class="neon-btn danger" (click)="payOut()">üèß –í—ã–≤–µ—Å—Ç–∏</button>
    </ng-container>

    <!-- –ò—Å—Ç–æ—Ä–∏—è -->
    <ng-container *ngIf="tab==='history'">
      <h3>–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h3>
      <div *ngIf="transactions.length; else empty" class="history-table">
        <div class="tx-row" *ngFor="let t of transactions">
          <span>{{ t.createAt | date:'dd.MM HH:mm' }}</span>
          <span [class.in]="t.type==='PayIn'" [class.out]="t.type==='PayOut'">
            {{ t.type === 'PayIn' ? '+' : '-' }}{{ t.amount }} USDT
          </span>
          <span>{{ t.hash ? t.hash.substring(0,10)+'...' : '-' }}</span>
        </div>
      </div>
      <ng-template #empty>
        <p class="empty">–ù–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–π</p>
      </ng-template>
    </ng-container>
  </section>
</div>
